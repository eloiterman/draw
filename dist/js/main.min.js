var draw=function(){var e=document.querySelector("main").offsetWidth,t=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),r=n.getContext("2d"),a=n.getBoundingClientRect(),i=0,o=0,c=0,d=0,l=0,s=0,u=!1,f=!1,w="",g=!1;return{setXY:function(e){u=i,f=o,i=e.clientX-a.left-n.offsetLeft,o=e.clientY-a.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+i,document.getElementById("trackY").innerHTML="Y: "+o},setStart:function(){c=i,d=o},setEnd:function(){l=i,s=o},setShape:function(e){w=e},getShape:function(){return w},setIsDrawing:function(e){g=e},getIsDrawing:function(){return g},draw:function(){r.restore(),"rectangle"===w?this.drawRect():"line"===w?this.drawLine():"path"===w?this.drawPath():"circle"===w?this.drawCircle():"triangle"===w?this.drawTriangle():alert("Please choose a shape"),r.save()},drawCircle:function(){r.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillStyle=color;let e=c-l,t=d-s,n=Math.sqrt(e*e+t*t);r.beginPath(),r.arc(c,d,n,0,2*Math.PI),r.stroke(),r.fill()},drawLine:function(){r.strokeStyle=color,r.beginPath(),r.moveTo(c,d),r.lineTo(l,s),r.stroke()},drawPath:function(){r.strokeStyle=color,r.beginPath(),r.moveTo(u,f),r.lineTo(i,o),r.stroke()},drawRect:function(){r.fillStyle=color,r.fillRect(c,d,l-c,s-d)},drawTriangle:function(){r.fillStyle=color,r.beginPath(),r.moveTo(c,d),r.lineTo(l,s),r.lineTo(1.25*c,1.25*d),r.fill()},getCanvas:function(){return n},init:function(){n.width=e,n.height=t,document.querySelector("main").appendChild(n)}}}();draw.init(),document.getElementById("colorpicker").addEventListener("change",e=>{color=e.target.value,console.log(color)}),draw.getCanvas().addEventListener("mousemove",function(e){draw.setXY(e),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),$("#btnTri").on("click",function(){draw.setShape("triangle"),console.log("triangle selected")});